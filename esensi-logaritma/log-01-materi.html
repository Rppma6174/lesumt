<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tahap 1: Esensi Logaritma - UMT Learning</title>

        <script>
        // --- KONFIGURASI PENTING UNTUK HALAMAN INI ---
        const subMateriId = 'log_1';      // ID Peta Belajar Induk (contoh: log_1, fk_1, dll)
        const thisStageId = 'materi';     // ID Tahap INI (contoh: materi, latihan1, dll)
        const previousStageId = '';       // ID Tahap SEBELUMNYA (kosongkan jika ini tahap pertama)
        // ----------------------------------------------

        (function secureContentPage() {
            // Sembunyikan konten halaman terlebih dahulu
            document.documentElement.style.visibility = 'hidden';

            // Cek #1: Apakah pengguna sudah login?
            const loggedInUserData = sessionStorage.getItem('loggedInUser');
            if (!loggedInUserData) {
                alert("Akses ditolak. Silakan login terlebih dahulu.");
                window.location.href = '../../login.html';
                return;
            }

            // Cek #2: Apakah tahap sebelumnya sudah selesai?
            // Jika previousStageId tidak kosong, lakukan pengecekan.
            if (previousStageId) {
                const prevStageKey = `progress_${subMateriId}_${previousStageId}`;
                const isPrevStageCompleted = localStorage.getItem(prevStageKey) === 'completed';

                if (!isPrevStageCompleted) {
                    alert("Akses ditolak. Selesaikan tahap sebelumnya pada Peta Belajar.");
                    // Kembalikan ke halaman peta belajar induknya
                    window.location.href = 'index.html'; 
                    return;
                }
            }

            // Jika semua pemeriksaan lolos, tampilkan halaman
            document.documentElement.style.visibility = 'visible';
        })();
    </script>
    
    <link rel="icon" type="image/png" href="../UMT-Logo - Copy.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
      MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary-purple: #8A2BE2;
            --dark-bg: #141414;
            --card-bg: #1c1c1c;
            --border-color: #333;
            --text-primary: #ffffff;
            --text-secondary: #ccc;
            --accent-green: #28a745;
            --accent-red: #F85149;
        }
        body {
            background-color: var(--dark-bg);
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
            line-height: 1.7;
        }
        .container { 
            max-width: 800px; 
            margin: 2rem auto; 
            padding: 1.5rem 2rem; 
            background-color: var(--card-bg); 
            border: 1px solid var(--border-color); 
            border-radius: 12px; 
        }
        .back-link {
            position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;
            background-color: var(--primary-purple); color: white; width: 50px; height: 50px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; text-decoration: none; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: transform 0.2s ease;
        }
        .back-link:hover { transform: scale(1.1); }
        h1, h2, h3 { color: var(--primary-purple); }
        h1 { font-size: 2.2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.75rem; margin-bottom: 1.5rem; font-weight: 700; }
        h2 { font-size: 1.6rem; margin-top: 2.5rem; margin-bottom: 1rem; border-left: 4px solid var(--primary-purple); padding-left: 1rem; font-weight: 600; }
        h3 { color: #A45EFF; margin-top: 2rem; }
        .hidden { display: none; }
        
        .strategy-box {
            background-color: rgba(40, 167, 69, 0.1);
            border-left: 4px solid var(--accent-green);
            padding: 1rem; margin: 1.5rem 0; border-radius: 0 8px 8px 0;
        }
        
        .explainer-button {
            background: none; border: none; color: var(--text-secondary); font-size: 0.9em;
            font-weight: 500; cursor: pointer; padding: 4px 8px; margin-top: 0.5rem;
            border-radius: 6px; transition: background-color 0.2s; display: inline-flex; align-items: center;
            border: 1px solid var(--border-color);
        }
        .explainer-button:hover { background-color: rgba(255, 255, 255, 0.05); }
        .explainer-button .fas { margin-left: 8px; transition: transform 0.3s ease; }
        .explainer-button.active .fas { transform: rotate(90deg); }
        .explainer-content {
            margin-top: 1rem; padding: 1rem;
            background-color: rgba(138, 43, 226, 0.08);
            border-left: 4px solid var(--primary-purple);
            border-radius: 0 8px 8px 0;
        }

        /* Tombol Selesai Baca */
        .finish-button {
            display: block; width: 100%; padding: 15px; background-color: var(--accent-green);
            color: var(--text-primary); border: none; border-radius: 8px; font-size: 18px;
            font-weight: 600; text-align: center; cursor: pointer; margin-top: 3rem;
            transition: all 0.3s ease;
        }
        .finish-button:hover { background-color: #218838; transform: translateY(-2px); }
        .finish-button:disabled { background-color: #555; cursor: not-allowed; transform: none; }

        /* Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: center;
            opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 2000;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: var(--card-bg); padding: 30px; border-radius: 15px;
            border: 1px solid var(--border-color); box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            width: 90%; max-width: 500px; text-align: center;
            transform: scale(0.9); transition: transform 0.3s;
        }
        .modal-overlay.active .modal-content { transform: scale(1); }
        .modal-content h3 { margin-top: 0; color: var(--primary-purple); font-weight: 600; font-size: 1.5rem; }
        .modal-content p { color: var(--text-secondary); margin-bottom: 25px; line-height: 1.6; }
        .modal-footer { display: flex; gap: 10px; }
        .modal-footer button { flex: 1; padding: 12px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .modal-footer .confirm-btn { background-color: var(--accent-green); color: white; }
        .modal-footer .confirm-btn:hover { background-color: #218838; }

        .success-icon {
            font-size: 4rem;
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        p, li, .explainer-content, .strategy-box { overflow-x: auto; padding-bottom: 8px; color: var(--text-secondary); }
        p strong, li strong { color: var(--text-primary); }
        blockquote {
            margin-left: 0; padding-left: 1.5rem;
            border-left: 4px solid var(--primary-purple);
            font-style: italic; font-size: 1.1em;
            color: var(--text-primary);
        }
        ::-webkit-scrollbar { height: 8px; width: 8px; }
        ::-webkit-scrollbar-track { background: var(--card-bg); }
        ::-webkit-scrollbar-thumb { background-color: #333; border-radius: 4px; border: 2px solid var(--card-bg); }
        ::-webkit-scrollbar-thumb:hover { background-color: #555; }
    </style>
</head>
<body>
    <!-- Modal Konfirmasi Selesai -->
    <div id="finish-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Konfirmasi Penyelesaian</h3>
            <p>Apakah Anda sudah selesai membaca dan memahami seluruh materi ini?</p>
            <p style="font-size: 0.9rem; color: #888;">Progress Anda akan disimpan dan tahapan berikutnya akan terbuka.</p>
            <div class="modal-footer">
                <button id="cancel-finish-btn" style="background-color: #555; color: white;">Belum</button>
                <button id="confirm-finish-btn" class="confirm-btn">Ya, Sudah Selesai</button>
            </div>
        </div>
    </div>

    <!-- Modal Sukses -->
    <div id="success-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="success-icon">✅</div>
            <h3>Materi Selesai!</h3>
            <p>Progress Anda telah disimpan. Tahapan berikutnya sudah terbuka.</p>
            <p style="font-weight: 600; color: var(--accent-green);">Anda akan diarahkan kembali ke roadmap...</p>
        </div>
    </div>

    <div class="container">
        <a href="../esensi-logaritma/" class="back-link" title="Kembali ke Roadmap">
            <i class="fas fa-arrow-left"></i>
        </a>
        
        <h1>Tahap 1: Esensi Logaritma - Pertanyaan yang Terbalik</h1>
        <p>
            Sebelum kita bisa "berlari" dengan logaritma, kita harus "berjalan" dengan eksponen. Ingat kembali eksponen: kita diberi basis dan pangkat, lalu kita mencari hasilnya.
        </p>
        <p>Contoh: $3^4 = 3 \times 3 \times 3 \times 3 = 81$.</p>
        <p>
            Namun, bagaimana jika pertanyaannya kita balik?
        </p>

        <h2>Membalik Pertanyaan: Lahirnya Logaritma</h2>
        <p>Perhatikan pertanyaan berikut:</p>
        <blockquote>
            <b>"3 pangkat berapa agar hasilnya 81?"</b>
        </blockquote>
        <p>
            Kita tahu jawabannya adalah 4. Tetapi, tidak ada operator matematika dasar (+, -, ×, ÷, √) yang bisa menjawab pertanyaan "pangkat berapa?" ini secara langsung. Untuk itulah, matematikawan menciptakan sebuah alat baru yang disebut <strong>logaritma</strong>.
        </p>
        <p>
            Logaritma adalah notasi untuk menanyakan "pangkat berapa?". Pertanyaan di atas ditulis sebagai:
        </p>
        $$ ^3\log 81 $$
        <p>Yang secara harfiah dibaca: "logaritma 81 dengan basis 3", atau dalam bahasa UMT: "3 pangkat berapa agar hasilnya 81?". Jawabannya, tentu saja, adalah 4.</p>
        
        <h2>Definisi Formal Kunci: Batu Rosetta Logaritma</h2>
        <p>
            Hubungan antara eksponen dan logaritma adalah hubungan dua arah yang tak terpisahkan. Ini adalah fondasi yang harus Anda kuasai sepenuhnya (level LOTS).
        </p>
        <div class="strategy-box">
            Jika $a > 0$, $a \neq 1$, dan $b > 0$, maka:
            $$ ^a\log b = c \quad \iff \quad a^c = b $$
        </div>
        <ul>
            <li>$a$ disebut <b>basis</b> (bilangan pokok).</li>
            <li>$b$ disebut <b>numerus</b> (bilangan yang dicari logaritmanya).</li>
            <li>$c$ adalah <b>hasil logaritma</b> (yang sebenarnya adalah pangkat).</li>
        </ul>
        <p><i>Contoh konversi:</i></p>
        <ul>
            <li>$2^5 = 32 \iff ^2\log 32 = 5$</li>
            <li>$10^3 = 1000 \iff ^{10}\log 1000 = 3$</li>
        </ul>

        <h2>Mengapa Logaritma Diciptakan? (Level HOTS)</h2>
        <p>
            Logaritma diciptakan untuk satu tujuan utama: <strong>menyelesaikan persamaan di mana variabelnya adalah pangkat.</strong>
        </p>
        <p>
            Sangat mudah menyelesaikan $x^2 = 49$ (jawabannya $x=7$ atau $x=-7$). Tapi bagaimana cara menyelesaikan $7^x = 49$? Tentu mudah, $x=2$. Tapi bagaimana jika $7^x = 100$? Di sinilah logaritma menjadi sangat kuat. Jawabannya adalah $x = ^7\log 100$.
        </p>
        <p>
            <b>Analogi:</b> Jika eksponen adalah gembok (misal, $7^2$ mengunci angka 7 menjadi 49), maka logaritma adalah kuncinya ($^7\log 49$ membuka 49 untuk menemukan pangkat '2' yang digunakan).
        </p>

        <h2>Syarat-syarat Logaritma (Level MOTS)</h2>
        <p>
            Tidak semua nilai bisa dimasukkan ke dalam logaritma. Ada tiga syarat yang harus dipenuhi agar $^a\log b$ terdefinisi, yang semuanya berasal dari logika eksponen:
        </p>
        <ol>
            <li><strong>Basis $a > 0$:</strong> Kita tidak bekerja dengan basis negatif dalam eksponen umum untuk menghindari hasil yang tidak konsisten.</li>
            <li><strong>Basis $a \neq 1$:</strong> Jika basisnya 1, maka $1^c$ akan selalu 1. Pertanyaannya menjadi tidak berguna.</li>
            <li><strong>Numerus $b > 0$:</strong> Basis yang positif, dipangkatkan berapapun, tidak akan pernah menghasilkan angka negatif atau nol.</li>
        </ol>
        <button class="explainer-button">Pentingnya Memeriksa Syarat <i class="fas fa-chevron-right"></i></button>
        <div class="explainer-content hidden">
            <p>Memahami syarat ini sangat krusial saat Anda menyelesaikan persamaan atau pertidaksamaan logaritma nanti. Seringkali, Anda akan menemukan solusi aljabar yang valid, tetapi solusi tersebut harus dibuang karena melanggar syarat numerus atau basis. Ini adalah jebakan umum dalam soal-soal level MOTS dan HOTS.</p>
        </div>

        <button id="finish-reading-btn" class="finish-button">
            <i class="fas fa-check-circle"></i> Saya Sudah Selesai Membaca
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ============ KONFIGURASI PROGRESS ============
            const SUB_MATERI_ID = "log_1";
            const CURRENT_STAGE_ID = "materi";
            const ROADMAP_PATH = "../esensi-logaritma/";
            // ==============================================

            const finishBtn = document.getElementById('finish-reading-btn');
            const finishModal = document.getElementById('finish-modal');
            const successModal = document.getElementById('success-modal');
            const confirmFinishBtn = document.getElementById('confirm-finish-btn');
            const cancelFinishBtn = document.getElementById('cancel-finish-btn');

            // Logika untuk tombol penjelasan
            document.querySelectorAll('.explainer-button').forEach(button => {
                button.addEventListener('click', () => {
                    button.classList.toggle('active');
                    const content = button.nextElementSibling;
                    const isOpening = content.classList.contains('hidden');
                    content.classList.toggle('hidden');
                    if (isOpening) {
                        if(window.MathJax) {
                            MathJax.typesetPromise([content]);
                        }
                    }
                });
            });

            // Tombol selesai membaca
            finishBtn.addEventListener('click', () => {
                finishModal.classList.add('active');
            });

            // Batal
            cancelFinishBtn.addEventListener('click', () => {
                finishModal.classList.remove('active');
            });

            // Konfirmasi selesai
            confirmFinishBtn.addEventListener('click', () => {
                // Simpan progress
                const storageKey = `progress_${SUB_MATERI_ID}_${CURRENT_STAGE_ID}`;
                localStorage.setItem(storageKey, 'completed');
                console.log(`Progress saved: ${storageKey} = completed`);

                // Tampilkan modal sukses
                finishModal.classList.remove('active');
                successModal.classList.add('active');

                // Redirect ke roadmap setelah 2 detik
                setTimeout(() => {
                    window.location.href = ROADMAP_PATH;
                }, 2000);
            });
        });
    </script>
</body>
</html>
